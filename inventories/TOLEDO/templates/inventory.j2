# This file is automatically generated via inventory_builder.yml playbook
{{ site_name }}:
  children:
    CVAAS:
      hosts:
        cvaas:
############################################
#           {{ site_name }} CORE SWITCHES           #
############################################
    {{ site_name }}_FABRIC:
      children:
        {{ site_name }}_CORE:
          hosts:
{% for device in nb_device_list.device_list %}
{%  if 'CORE' in device.name and device.status == 'ACTIVE' and device.primary_ip4.address is defined %}
            {{ device.name }}:
              ansible_host: {{ device.primary_ip4.address | ipaddr('address') }}
              is_deployed: true
{%  endif %}
{%  if 'CORE' in device.name and device.status == 'ACTIVE' and device.primary_ip4.address is undefined %}
            {{ device.name }}:
              is_deployed: false
              # Don't forget to add Primary IPv4 to Netbox device!
{%  endif %}
{%  if 'CORE' in device.name and device.status == 'OFFLINE' and device.primary_ip4.address is defined %}
            {{ device.name }}:
              ansible_host: {{ device.primary_ip4.address | ipaddr('address') }}
              is_deployed: false # Host set to 'OFFLINE' in Netbox.
{%  endif %}
{%  if 'CORE' in device.name and device.status == 'OFFLINE' and device.primary_ip4.address is undefined %}
            {{ device.name }}:
              is_deployed: false # Host set to 'OFFLINE' in Netbox.
              # Don't forget to add Primary IPv4 to Netbox device!
{%  endif %}
{% endfor %}
############################################
#           {{ site_name }} ACCESS SWITCHES         #
############################################
        {{ site_name }}_ACCESS:
          hosts:
{% for device in nb_device_list.device_list %}
{%  if 'ACCESS' in device.name and device.status == 'ACTIVE' and device.primary_ip4.address is defined %}
            {{ device.name }}:
              ansible_host: {{ device.primary_ip4.address | ipaddr('address') }}
              is_deployed: true
{%  endif %}
{%  if 'ACCESS' in device.name and device.status == 'ACTIVE' and device.primary_ip4.address is undefined %}
            {{ device.name }}:
              is_deployed: false
              # Don't forget to add Primary IPv4 to Netbox device!
{%  endif %}
{%  if 'ACCESS' in device.name and device.status == 'OFFLINE' and device.primary_ip4.address is defined %}
            {{ device.name }}:
              ansible_host: {{ device.primary_ip4.address | ipaddr('address') }}
              is_deployed: false # Host set to 'OFFLINE' in Netbox.
{%  endif %}
{%  if 'ACCESS' in device.name and device.status == 'OFFLINE' and device.primary_ip4.address is undefined %}
            {{ device.name }}:
              is_deployed: false # Host set to 'OFFLINE' in Netbox.
              # Don't forget to add Primary IPv4 to Netbox device!
{%  endif %}
{% endfor %}
############################################
#           {{ site_name }} INET SWITCHES           #
############################################
        {{ site_name }}_INET:
          hosts:
{% for device in nb_device_list.device_list %}
{%  if 'INET' in device.name and device.status == 'ACTIVE' and device.primary_ip4.address is defined %}
            {{ device.name }}:
              ansible_host: {{ device.primary_ip4.address | ipaddr('address') }}
              is_deployed: true
{%  endif %}
{%  if 'INET' in device.name and device.status == 'ACTIVE' and device.primary_ip4.address is undefined %}
            {{ device.name }}:
              is_deployed: false
              # Don't forget to add Primary IPv4 to Netbox device!
{%  endif %}
{%  if 'INET' in device.name and device.status == 'OFFLINE' and device.primary_ip4.address is defined %}
            {{ device.name }}:
              ansible_host: {{ device.primary_ip4.address | ipaddr('address') }}
              is_deployed: false # Host set to 'OFFLINE' in Netbox.
{%  endif %}
{%  if 'INET' in device.name and device.status == 'OFFLINE' and device.primary_ip4.address is undefined %}
            {{ device.name }}:
              is_deployed: false # Host set to 'OFFLINE' in Netbox.
              # Don't forget to add Primary IPv4 to Netbox device!
{%  endif %}
{% endfor %}
############################################
#           {{ site_name }} MGMT SWITCHES           #
############################################
        {{ site_name }}_MGMT:
          hosts:
{% for device in nb_device_list.device_list %}
{%  if 'MGMT' in device.name and device.status == 'ACTIVE' and device.primary_ip4.address is defined %}
            {{ device.name }}:
              ansible_host: {{ device.primary_ip4.address | ipaddr('address') }}
              is_deployed: true
{%  endif %}
{%  if 'MGMT' in device.name and device.status == 'ACTIVE' and device.primary_ip4.address is undefined %}
            {{ device.name }}:
              is_deployed: false
              # Don't forget to add Primary IPv4 to Netbox device!
{%  endif %}
{%  if 'MGMT' in device.name and device.status == 'OFFLINE' and device.primary_ip4.address is defined %}
            {{ device.name }}:
              ansible_host: {{ device.primary_ip4.address | ipaddr('address') }}
              is_deployed: false # Host set to 'OFFLINE' in Netbox.
{%  endif %}
{%  if 'MGMT' in device.name and device.status == 'OFFLINE' and device.primary_ip4.address is undefined %}
            {{ device.name }}:
              is_deployed: false # Host set to 'OFFLINE' in Netbox.
              # Don't forget to add Primary IPv4 to Netbox device!
{%  endif %}
{% endfor %}
############################################
#                Groups                    #
############################################
    {{ site_name }}_FABRIC_SERVICES:
      children:
        {{ site_name }}_CORE:
        {{ site_name }}_ACCESS:
        {{ site_name }}_INET:
        {{ site_name }}_MGMT:
    {{ site_name }}_FABRIC_PORTS:
      children:
        {{ site_name }}_CORE:
        {{ site_name }}_ACCESS:
        {{ site_name }}_INET:
        {{ site_name }}_MGMT:
{#                               #}
{# End of {{ site_name }} Fabric Inventory #}
{#                               #}